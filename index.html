<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator HPP Lengkap - Harga Pokok Penjualan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-full">
    <div class="container mx-auto px-4 py-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">üìä Kalkulator HPP Lengkap</h1>
            <p class="text-gray-600">Hitung Harga Pokok Penjualan dengan detail komponen yang akurat</p>
        </header>

        <main class="max-w-4xl mx-auto">
            <div class="bg-white rounded-2xl shadow-xl p-8 mb-6">
                <form id="hppForm" class="space-y-8">
                    <!-- Informasi Produk -->
                    <div class="border-b pb-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                            üì¶ Informasi Produk
                        </h2>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div>
                                <label for="namaProduk" class="block text-sm font-semibold text-gray-700 mb-2">Nama Produk</label>
                                <input type="text" id="namaProduk" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Contoh: Kue Brownies">
                            </div>
                            <div>
                                <label for="kategoriProduk" class="block text-sm font-semibold text-gray-700 mb-2">Kategori Produk</label>
                                <select id="kategoriProduk" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">Pilih Kategori</option>
                                    <option value="makanan">Makanan & Minuman</option>
                                    <option value="fashion">Fashion & Aksesoris</option>
                                    <option value="elektronik">Elektronik</option>
                                    <option value="kerajinan">Kerajinan Tangan</option>
                                    <option value="kosmetik">Kosmetik & Kecantikan</option>
                                    <option value="lainnya">Lainnya</option>
                                </select>
                            </div>
                            <div>
                                <label for="jumlahProduksi" class="block text-sm font-semibold text-gray-700 mb-2">Target Produksi (Unit)</label>
                                <input type="number" id="jumlahProduksi" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="100" min="1">
                            </div>
                        </div>
                    </div>

                    <!-- Biaya Bahan Baku -->
                    <div class="border-b pb-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                            ü•Ñ Biaya Bahan Baku & Material
                        </h2>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label for="bahanUtama" class="block text-sm font-semibold text-gray-700 mb-2">Bahan Utama (Rp)</label>
                                <input type="number" id="bahanUtama" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0" min="0">
                                <p class="text-xs text-gray-500 mt-1">Tepung, kain, komponen utama, dll</p>
                            </div>
                            <div>
                                <label for="bahanPendukung" class="block text-sm font-semibold text-gray-700 mb-2">Bahan Pendukung (Rp)</label>
                                <input type="number" id="bahanPendukung" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0" min="0">
                                <p class="text-xs text-gray-500 mt-1">Gula, benang, aksesoris, dll</p>
                            </div>
                            <div>
                                <label for="bahanKemasan" class="block text-sm font-semibold text-gray-700 mb-2">Bahan Kemasan (Rp)</label>
                                <input type="number" id="bahanKemasan" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0" min="0">
                                <p class="text-xs text-gray-500 mt-1">Kotak, plastik, label, stiker, dll</p>
                            </div>
                            <div>
                                <label for="bahanLainnya" class="block text-sm font-semibold text-gray-700 mb-2">Bahan Lainnya (Rp)</label>
                                <input type="number" id="bahanLainnya" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0" min="0">
                                <p class="text-xs text-gray-500 mt-1">Bahan tambahan lainnya</p>
                            </div>
                        </div>
                    </div>

                    <!-- Biaya Tenaga Kerja -->
                    <div class="border-b pb-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                            üë• Biaya Tenaga Kerja
                        </h2>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label for="gajiKaryawan" class="block text-sm font-semibold text-gray-700 mb-2">Gaji Karyawan/Bulan (Rp)</label>
                                <input type="number" id="gajiKaryawan" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0" min="0">
                                <p class="text-xs text-gray-500 mt-1">Total gaji semua karyawan per bulan</p>
                            </div>
                            <div>
                                <label for="upahBorongan" class="block text-sm font-semibold text-gray-700 mb-2">Upah Borongan (Rp)</label>
                                <input type="number" id="upahBorongan" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0" min="0">
                                <p class="text-xs text-gray-500 mt-1">Upah per produk/project</p>
                            </div>
                            <div>
                                <label for="tunjangan" class="block text-sm font-semibold text-gray-700 mb-2">Tunjangan & Bonus (Rp)</label>
                                <input type="number" id="tunjangan" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0" min="0">
                                <p class="text-xs text-gray-500 mt-1">THR, bonus, tunjangan makan, dll</p>
                            </div>
                            <div>
                                <label for="jamKerjaBulan" class="block text-sm font-semibold text-gray-700 mb-2">Jam Kerja/Bulan</label>
                                <input type="number" id="jamKerjaBulan" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="160" min="1">
                                <p class="text-xs text-gray-500 mt-1">Total jam kerja dalam sebulan</p>
                            </div>
                        </div>
                    </div>

                    <!-- Biaya Overhead -->
                    <div class="border-b pb-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                            üè¢ Biaya Overhead (Biaya Tidak Langsung)
                        </h2>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div>
                                <label for="sewaTempat" class="block text-sm font-semibold text-gray-700 mb-2">Sewa Tempat/Bulan (Rp)</label>
                                <input type="number" id="sewaTempat" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0" min="0">
                            </div>
                            <div>
                                <label for="listrik" class="block text-sm font-semibold text-gray-700 mb-2">Listrik/Bulan (Rp)</label>
                                <input type="number" id="listrik" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0" min="0">
                            </div>
                            <div>
                                <label for="air" class="block text-sm font-semibold text-gray-700 mb-2">Air/Bulan (Rp)</label>
                                <input type="number" id="air" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0" min="0">
                            </div>
                            <div>
                                <label for="internet" class="block text-sm font-semibold text-gray-700 mb-2">Internet & Telepon (Rp)</label>
                                <input type="number" id="internet" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0" min="0">
                            </div>
                            <div>
                                <label for="asuransi" class="block text-sm font-semibold text-gray-700 mb-2">Asuransi/Bulan (Rp)</label>
                                <input type="number" id="asuransi" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0" min="0">
                            </div>
                            <div>
                                <label for="perawatan" class="block text-sm font-semibold text-gray-700 mb-2">Perawatan Alat (Rp)</label>
                                <input type="number" id="perawatan" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0" min="0">
                            </div>
                        </div>
                    </div>

                    <!-- Biaya Pemasaran & Penjualan -->
                    <div class="border-b pb-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                            üì¢ Biaya Pemasaran & Penjualan
                        </h2>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label for="iklan" class="block text-sm font-semibold text-gray-700 mb-2">Iklan & Promosi (Rp)</label>
                                <input type="number" id="iklan" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0" min="0">
                                <p class="text-xs text-gray-500 mt-1">Facebook Ads, Google Ads, brosur, dll</p>
                            </div>
                            <div>
                                <label for="komisiPenjualan" class="block text-sm font-semibold text-gray-700 mb-2">Komisi Penjualan (Rp)</label>
                                <input type="number" id="komisiPenjualan" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0" min="0">
                                <p class="text-xs text-gray-500 mt-1">Komisi sales, reseller, affiliate</p>
                            </div>
                            <div>
                                <label for="ongkosKirim" class="block text-sm font-semibold text-gray-700 mb-2">Ongkos Kirim (Rp)</label>
                                <input type="number" id="ongkosKirim" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0" min="0">
                                <p class="text-xs text-gray-500 mt-1">Biaya pengiriman ke customer</p>
                            </div>
                            <div>
                                <label for="marketplace" class="block text-sm font-semibold text-gray-700 mb-2">Fee Marketplace (Rp)</label>
                                <input type="number" id="marketplace" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0" min="0">
                                <p class="text-xs text-gray-500 mt-1">Tokopedia, Shopee, Lazada, dll</p>
                            </div>
                        </div>
                    </div>

                    <!-- Biaya Administrasi -->
                    <div class="border-b pb-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                            üìã Biaya Administrasi & Lainnya
                        </h2>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div>
                                <label for="administrasi" class="block text-sm font-semibold text-gray-700 mb-2">Administrasi (Rp)</label>
                                <input type="number" id="administrasi" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0" min="0">
                                <p class="text-xs text-gray-500 mt-1">ATK, fotocopy, materai, dll</p>
                            </div>
                            <div>
                                <label for="pajak" class="block text-sm font-semibold text-gray-700 mb-2">Pajak (Rp)</label>
                                <input type="number" id="pajak" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0" min="0">
                                <p class="text-xs text-gray-500 mt-1">PPh, PPN, pajak daerah</p>
                            </div>
                            <div>
                                <label for="penyusutan" class="block text-sm font-semibold text-gray-700 mb-2">Penyusutan Alat (Rp)</label>
                                <input type="number" id="penyusutan" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0" min="0">
                                <p class="text-xs text-gray-500 mt-1">Mesin, komputer, kendaraan</p>
                            </div>
                        </div>
                    </div>

                    <!-- Target Keuntungan -->
                    <div class="pb-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                            üí∞ Target Keuntungan
                        </h2>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label for="marginKeuntungan" class="block text-sm font-semibold text-gray-700 mb-2">Margin Keuntungan (%)</label>
                                <input type="number" id="marginKeuntungan" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="20" min="0" max="1000">
                                <p class="text-xs text-gray-500 mt-1">Persentase keuntungan yang diinginkan</p>
                            </div>
                            <div>
                                <label for="periodeProduksi" class="block text-sm font-semibold text-gray-700 mb-2">Periode Produksi</label>
                                <select id="periodeProduksi" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="harian">Per Hari</option>
                                    <option value="mingguan">Per Minggu</option>
                                    <option value="bulanan" selected>Per Bulan</option>
                                    <option value="tahunan">Per Tahun</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold py-4 px-6 rounded-lg hover:from-blue-700 hover:to-indigo-700 transform hover:scale-105 transition-all duration-200 shadow-lg">
                        üßÆ Hitung HPP Lengkap
                    </button>
                </form>
            </div>

            <div id="hasilKalkulasi" class="bg-white rounded-2xl shadow-xl p-8 hidden">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">üìä Hasil Kalkulasi HPP Lengkap</h2>
                
                <div class="grid md:grid-cols-2 gap-6 mb-8">
                    <div class="space-y-4">
                        <div class="flex justify-between items-center p-4 bg-gray-50 rounded-lg">
                            <span class="font-semibold text-gray-700">Nama Produk:</span>
                            <span id="hasilNamaProduk" class="font-bold text-gray-800">-</span>
                        </div>
                        
                        <div class="flex justify-between items-center p-4 bg-blue-50 rounded-lg">
                            <span class="font-semibold text-gray-700">Total HPP per Unit:</span>
                            <span id="hasilHPP" class="font-bold text-blue-600 text-xl">Rp 0</span>
                        </div>
                        
                        <div class="flex justify-between items-center p-4 bg-green-50 rounded-lg">
                            <span class="font-semibold text-gray-700">Harga Jual Disarankan:</span>
                            <span id="hasilHargaJual" class="font-bold text-green-600 text-xl">Rp 0</span>
                        </div>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="flex justify-between items-center p-4 bg-yellow-50 rounded-lg">
                            <span class="font-semibold text-gray-700">Keuntungan per Unit:</span>
                            <span id="hasilKeuntungan" class="font-bold text-yellow-600 text-xl">Rp 0</span>
                        </div>
                        
                        <div class="flex justify-between items-center p-4 bg-purple-50 rounded-lg">
                            <span class="font-semibold text-gray-700">Total Keuntungan:</span>
                            <span id="hasilTotalKeuntungan" class="font-bold text-purple-600 text-xl">Rp 0</span>
                        </div>
                        
                        <div class="flex justify-between items-center p-4 bg-indigo-50 rounded-lg">
                            <span class="font-semibold text-gray-700">Total Omzet:</span>
                            <span id="hasilTotalOmzet" class="font-bold text-indigo-600 text-xl">Rp 0</span>
                        </div>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <div class="bg-red-50 rounded-lg p-6">
                        <h3 class="font-semibold text-red-800 mb-4">üí∏ Rincian Biaya per Unit:</h3>
                        <div id="rincianBiaya" class="text-sm text-red-700 space-y-2">
                            <!-- Rincian akan diisi oleh JavaScript -->
                        </div>
                    </div>

                    <div class="bg-green-50 rounded-lg p-6">
                        <h3 class="font-semibold text-green-800 mb-4">üìà Analisis Profitabilitas:</h3>
                        <div id="analisisProfitabilitas" class="text-sm text-green-700 space-y-2">
                            <!-- Analisis akan diisi oleh JavaScript -->
                        </div>
                    </div>
                </div>

                <div class="mt-6 flex gap-4">
                    <button onclick="resetForm()" class="flex-1 bg-gray-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-gray-600 transition-colors duration-200">
                        üîÑ Hitung Ulang
                    </button>
                    <button onclick="cetakHasil()" class="flex-1 bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors duration-200">
                        üñ®Ô∏è Cetak Hasil
                    </button>
                </div>
            </div>
        </main>

        <footer class="text-center mt-12 text-gray-600">
            <p class="text-sm">üíº Kalkulator HPP Lengkap - Analisis biaya produksi yang akurat untuk bisnis Anda</p>
        </footer>
    </div>

    <script>
        function formatRupiah(angka) {
            return new Intl.NumberFormat('id-ID', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(angka);
        }

        function hitungHPP() {
            // Ambil data input
            const namaProduk = document.getElementById('namaProduk').value || 'Produk';
            const kategoriProduk = document.getElementById('kategoriProduk').value;
            const jumlahProduksi = parseFloat(document.getElementById('jumlahProduksi').value) || 1;
            const periodeProduksi = document.getElementById('periodeProduksi').value;

            // Biaya Bahan Baku
            const bahanUtama = parseFloat(document.getElementById('bahanUtama').value) || 0;
            const bahanPendukung = parseFloat(document.getElementById('bahanPendukung').value) || 0;
            const bahanKemasan = parseFloat(document.getElementById('bahanKemasan').value) || 0;
            const bahanLainnya = parseFloat(document.getElementById('bahanLainnya').value) || 0;
            const totalBahanBaku = bahanUtama + bahanPendukung + bahanKemasan + bahanLainnya;

            // Biaya Tenaga Kerja
            const gajiKaryawan = parseFloat(document.getElementById('gajiKaryawan').value) || 0;
            const upahBorongan = parseFloat(document.getElementById('upahBorongan').value) || 0;
            const tunjangan = parseFloat(document.getElementById('tunjangan').value) || 0;
            const jamKerjaBulan = parseFloat(document.getElementById('jamKerjaBulan').value) || 160;
            const totalTenagaKerja = gajiKaryawan + upahBorongan + tunjangan;

            // Biaya Overhead
            const sewaTempat = parseFloat(document.getElementById('sewaTempat').value) || 0;
            const listrik = parseFloat(document.getElementById('listrik').value) || 0;
            const air = parseFloat(document.getElementById('air').value) || 0;
            const internet = parseFloat(document.getElementById('internet').value) || 0;
            const asuransi = parseFloat(document.getElementById('asuransi').value) || 0;
            const perawatan = parseFloat(document.getElementById('perawatan').value) || 0;
            const totalOverhead = sewaTempat + listrik + air + internet + asuransi + perawatan;

            // Biaya Pemasaran
            const iklan = parseFloat(document.getElementById('iklan').value) || 0;
            const komisiPenjualan = parseFloat(document.getElementById('komisiPenjualan').value) || 0;
            const ongkosKirim = parseFloat(document.getElementById('ongkosKirim').value) || 0;
            const marketplace = parseFloat(document.getElementById('marketplace').value) || 0;
            const totalPemasaran = iklan + komisiPenjualan + ongkosKirim + marketplace;

            // Biaya Administrasi
            const administrasi = parseFloat(document.getElementById('administrasi').value) || 0;
            const pajak = parseFloat(document.getElementById('pajak').value) || 0;
            const penyusutan = parseFloat(document.getElementById('penyusutan').value) || 0;
            const totalAdministrasi = administrasi + pajak + penyusutan;

            // Margin Keuntungan
            const marginKeuntungan = parseFloat(document.getElementById('marginKeuntungan').value) || 0;

            // Konversi periode ke faktor pengali
            let faktorPeriode = 1;
            switch(periodeProduksi) {
                case 'harian': faktorPeriode = 30; break;
                case 'mingguan': faktorPeriode = 4; break;
                case 'bulanan': faktorPeriode = 1; break;
                case 'tahunan': faktorPeriode = 1/12; break;
            }

            // Hitung total biaya per periode
            const totalBiayaTetap = (totalTenagaKerja + totalOverhead + totalPemasaran + totalAdministrasi) * faktorPeriode;
            
            // Hitung HPP per unit
            const biayaBahanPerUnit = totalBahanBaku / jumlahProduksi;
            const biayaTetapPerUnit = totalBiayaTetap / jumlahProduksi;
            const hppPerUnit = biayaBahanPerUnit + biayaTetapPerUnit;

            // Hitung harga jual dan keuntungan
            const keuntunganPerUnit = (hppPerUnit * marginKeuntungan) / 100;
            const hargaJual = hppPerUnit + keuntunganPerUnit;
            const totalKeuntungan = keuntunganPerUnit * jumlahProduksi;
            const totalOmzet = hargaJual * jumlahProduksi;

            // Tampilkan hasil
            document.getElementById('hasilNamaProduk').textContent = namaProduk;
            document.getElementById('hasilHPP').textContent = formatRupiah(hppPerUnit);
            document.getElementById('hasilHargaJual').textContent = formatRupiah(hargaJual);
            document.getElementById('hasilKeuntungan').textContent = formatRupiah(keuntunganPerUnit);
            document.getElementById('hasilTotalKeuntungan').textContent = formatRupiah(totalKeuntungan);
            document.getElementById('hasilTotalOmzet').textContent = formatRupiah(totalOmzet);

            // Rincian biaya
            const rincianBiaya = document.getElementById('rincianBiaya');
            rincianBiaya.innerHTML = `
                <div class="flex justify-between"><span>‚Ä¢ Bahan Baku per Unit:</span><span>${formatRupiah(biayaBahanPerUnit)}</span></div>
                <div class="flex justify-between"><span>‚Ä¢ Biaya Tetap per Unit:</span><span>${formatRupiah(biayaTetapPerUnit)}</span></div>
                <div class="flex justify-between border-t pt-2 mt-2 font-semibold"><span>Total HPP per Unit:</span><span>${formatRupiah(hppPerUnit)}</span></div>
                <div class="mt-3 text-xs">
                    <div>Rincian Bahan Baku: ${formatRupiah(totalBahanBaku)}</div>
                    <div>Rincian Biaya Tetap: ${formatRupiah(totalBiayaTetap)}</div>
                    <div>Jumlah Produksi: ${jumlahProduksi} unit</div>
                </div>
            `;

            // Analisis profitabilitas
            const marginPersen = ((keuntunganPerUnit / hargaJual) * 100).toFixed(1);
            const roiPersen = ((totalKeuntungan / (totalBahanBaku + totalBiayaTetap)) * 100).toFixed(1);
            
            const analisisProfitabilitas = document.getElementById('analisisProfitabilitas');
            analisisProfitabilitas.innerHTML = `
                <div class="flex justify-between"><span>‚Ä¢ Margin Profit:</span><span>${marginPersen}%</span></div>
                <div class="flex justify-between"><span>‚Ä¢ ROI (Return on Investment):</span><span>${roiPersen}%</span></div>
                <div class="flex justify-between"><span>‚Ä¢ Break Even Point:</span><span>${Math.ceil((totalBiayaTetap + totalBahanBaku) / hargaJual)} unit</span></div>
                <div class="mt-3 text-xs">
                    <div>Kategori: ${kategoriProduk || 'Tidak dipilih'}</div>
                    <div>Periode: ${periodeProduksi}</div>
                    <div>Target Margin: ${marginKeuntungan}%</div>
                </div>
            `;

            // Tampilkan hasil
            document.getElementById('hasilKalkulasi').classList.remove('hidden');
            document.getElementById('hasilKalkulasi').scrollIntoView({ behavior: 'smooth' });
        }

        function resetForm() {
            document.getElementById('hppForm').reset();
            document.getElementById('hasilKalkulasi').classList.add('hidden');
            document.querySelector('header').scrollIntoView({ behavior: 'smooth' });
        }

        function cetakHasil() {
            const printContent = document.getElementById('hasilKalkulasi').innerHTML;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                <head>
                    <title>Hasil Kalkulasi HPP</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
                        .space-y-4 > * + * { margin-top: 16px; }
                        .p-4 { padding: 16px; }
                        .rounded-lg { border-radius: 8px; }
                        .bg-gray-50 { background-color: #f9fafb; }
                        .bg-blue-50 { background-color: #eff6ff; }
                        .bg-green-50 { background-color: #f0fdf4; }
                        .bg-yellow-50 { background-color: #fefce8; }
                        .bg-purple-50 { background-color: #faf5ff; }
                        .bg-indigo-50 { background-color: #eef2ff; }
                        .bg-red-50 { background-color: #fef2f2; }
                        .font-bold { font-weight: bold; }
                        .text-xl { font-size: 1.25rem; }
                        .text-2xl { font-size: 1.5rem; }
                        .text-center { text-align: center; }
                        .mb-6 { margin-bottom: 24px; }
                        .mb-4 { margin-bottom: 16px; }
                        .mt-6 { margin-top: 24px; }
                        button { display: none; }
                    </style>
                </head>
                <body>
                    <h1 style="text-align: center; margin-bottom: 30px;">üìä Hasil Kalkulasi HPP Lengkap</h1>
                    ${printContent}
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        document.getElementById('hppForm').addEventListener('submit', function(e) {
            e.preventDefault();
            hitungHPP();
        });

        // Auto-format input angka
        const numberInputs = document.querySelectorAll('input[type="number"]');
        numberInputs.forEach(input => {
            input.addEventListener('input', function() {
                if (this.value < 0) this.value = 0;
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9915a7fae3fe71ba',t:'MTc2MDkzMzMyOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
